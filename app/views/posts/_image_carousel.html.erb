<div id="postImagesCarousel<%= post.id %>" class="carousel slide" data-interval="false">
  <ol class="carousel-indicators">
    <% post.images.size.times do |idx| %>
      <li id='indicator-<%= idx %>' data-target="#postImagesCarousel<%= post.id %>" data-slide-to="<%= idx %>" class="carousel-idx <%= ' active' if idx == 0 %>"></li>
    <% end %>
  </ol>
  <div class="carousel-inner" data-controller='image-preview'>
    <% post.images.each_with_index do |img, idx| %>
      <div id='img-<%= img.id %>' class="p-0 btn carousel-item<%= ' active' if idx == 0 %>">
        <button class='btn btn-lg shadow-none position-absolute mt-1' style='right:5px; z-index:2'>
          <%= icon 'fa', 'trash', class: 'text-danger', data: { action: 'click->image-preview#delete', postid: post.id, imgid: img.id, imgidx: idx } %>
        </button>
        <%= image_tag img.variant(resize_to_fit: [nil, 1000]), class: "img-fluid my-2", data: { action:"click->image-preview#preview" } %>
      </div>
    <% end %>
    <div class="modal fade" id='imagePreviewModal'>
      <div class="modal-dialog mw-100">
        <div class="modal-content border-0" style='background:none'>
          <button type="button" class="btn close shadow-none position-absolute" style='right:1px; z-index:1' data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
          <div class="modal-body">
            <img src='' id='imagePreview' class='img-fluid w-100'>
          </div>
        </div>
      </div>
    </div>
  </div>
  <a class="carousel-control-prev" href="#postImagesCarousel<%= post.id %>" role="button" data-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
    <span class="sr-only">Previous</span>
  </a>
  <a class="carousel-control-next" href="#postImagesCarousel<%= post.id %>" role="button" data-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
    <span class="sr-only">Next</span>
  </a>
</div>
